<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>여행지 선택</title>
  <style>
/********************************************/
    html, body {
  height: 100vh;       /* 창 전체 높이 */
  width: 100vw;        /* 창 전체 너비 */
  margin: 0;
  padding: 0;
  display: flex;       /* 중앙 배치 */
  justify-content: center;
  align-items: center; /* ✅ 세로 중앙 */
  background-color: #f0f0f0;
}

/*******************************************/

    body {
      font-family: 'Istok Web', sans-serif;
      background-color: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      color: #000000;
    }

    * {
      box-sizing: border-box;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    /* ===== 공통 ===== */
/*****************************************************/
    .container {
  position: relative;
  background-color: #ffffff;
  width: 393px;
  height: 787px;              /* ✅ 원하면 680~720으로 조절 */
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: flex-start; /* space-between 제거 */
  padding: 72px 16px 43px;
}


/*********************************************************/

    .title {
      font-family: 'Istok Web', sans-serif;
      font-weight: 700;
      font-size: 30px;
      line-height: 1.44;
      color: #000000;
      margin: 0;
      text-align: left;
    }

    /* ===== 여행지 선택 섹션 ===== */
    #main-section {
      width: 100%;
      display: flex;
      justify-content: center;
    }

    #main-section .page-header {
      flex-shrink: 0;
    }

    #main-section .content {
      margin-top: 46px;
      flex-grow: 1;
    }

    #main-section .chip-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 17px 37px;
    }

    #main-section .chip {
      background-color: #d9d9d9;
      border-radius: 40px;
      color: #000000;
      font-size: 10px;
      line-height: 15px;
      letter-spacing: -0.1px;
      text-align: center;
      border: none;
      padding: 12px 5px;
      cursor: pointer;
      transition: background-color 0.2s, color 0.2s;
    }

    #main-section .chip:hover {
      background-color: #c4c4c4;
    }

    #main-section .chip:focus,
    #main-section .chip.active {
      background-color: #0059ff;
      color: #ffffff;
      outline: none;
    }
/*************************************/
    #main-section .page-footer {
      margin-top: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      flex-shrink: 0;
      margin-bottom: 0;
    }
/***************************************/
    #main-section .btn-primary {
      background-color: #0059ff;
      border-radius: 8px;
      color: #ffffff;
      font-weight: 700;
      font-size: 18px;
      height: 55px;
      width: 100%;
      border: none;
      cursor: pointer;
    }

    #main-section .btn-primary:hover {
      background-color: #0045c7;
    }

    #main-section .skip-link {
      font-size: 12px;
      margin-top: 12px;
    }

    /* ===== 직접 입력 섹션 ===== */
    #destination-screen {
      width: 100%;
      display: none; /* 처음엔 숨김 */
      justify-content: center;
    }
    .input-real {
  width: 100%;
  height: 55px;
  margin-top: 48px;
  border-radius: 8px;
  border: none;
  background-color: #d9d9d9;
  padding: 0 12px;
  font-size: 16px;
  outline: none;
}


    #destination-screen .input-field-placeholder {
      display: block;
      max-width: 100%;
      height: auto;
      margin-top: 48px;
    }
/********************************************/
    #destination-screen .actions-footer {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0;
      margin-bottom: 0;
    }
/********************************************/
    #destination-screen .button-complete {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 55px;
      background-color: #0059ff;
      border-radius: 8px;
      color: #ffffff;
      font-weight: 700;
      font-size: 18px;
      text-align: center;
    }

    #destination-screen .link-skip {
      font-size: 12px;
      color: #000000;
      text-align: center;
    }
    


/***************************************************/
    /* ===== 좌표 고정 (메인 섹션) ===== */
#main-section .btn-primary,
#destination-screen .button-complete {
  position: absolute;
  left: 16px;
  top: 652.5px;
  width: 361px;
  height: 55px;
  background-color: #0059ff;
  border-radius: 8px;
  color: #ffffff;
  font-weight: 700;
  font-size: 18px;
  border: none;
  cursor: pointer;
    display: flex;
  justify-content: center;
  align-items: center;
}
/***************************************/
#main-section .skip-link,
#destination-screen .link-skip {
  position: absolute;
  top: 707.5px;
  left: 50%;
  transform: translateX(-50%); /* ✅ 가로 중앙 */
  font-size: 12px;
}
/*****************************************/

/* ===== 좌표 고정 (직접 입력 섹션) ===== */
#destination-screen .button-complete {
  position: absolute;
  left: 16px;
  top: 600px;
  width: 361px;
  height: 55px;
  background-color: #0059ff;
  border-radius: 8px;
  color: #ffffff;
  font-weight: 700;
  font-size: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
}
/****************************************************/
#destination-screen .link-skip {
  position: absolute;
  top: 670px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  color: #000000;
  text-align: center;
}
/*************************************************/
  </style>
</head>
<body>

  <!-- 여행지 선택 화면 -->
  <section id="main-section">
    <div class="container">
      <header class="page-header">
        <h1 class="title">어디로 떠나시요?</h1>
      </header>
      <main class="content">
        <div class="chip-grid">
          <button type="button" class="chip">강릉</button>
          <button type="button" class="chip">경주</button>
          <button type="button" class="chip">광주</button>
          <button type="button" class="chip">대구</button>
          <button type="button" class="chip">대전</button>
          <button type="button" class="chip">부산</button>
          <button type="button" class="chip">서울</button>
          <button type="button" class="chip">속초</button>
          <button type="button" class="chip">여수</button>
          <button type="button" class="chip">울산</button>
          <button type="button" class="chip">인천</button>
          <button type="button" class="chip">전주</button>
          <button type="button" class="chip">제주도</button>
          <button type="button" class="chip" id="custom-input-btn">직접 입력</button>
        </div>
      </main>
      <footer class="page-footer">
        <button type="button" class="btn-primary" id="submit-btn">완료</button>
        <a href="#" class="skip-link">다음에 하기</a>
      </footer>
    </div>
  </section>

  <!-- 직접 입력 화면 -->
  <section id="destination-screen">
    <div class="container">
      <header class="content-header">
        <h1 class="title">어디로 떠나시요?</h1>
        <input type="text" placeholder="여행지를 입력하세요" class="input-real" />

      </header>
      <footer class="actions-footer">
        <a href="#" class="button-complete">완료</a>
        <a href="#" class="link-skip">다음에 하기</a>
      </footer>
    </div>
    
  </section>

  

  <!-- JS -->
<script>
  const chips = document.querySelectorAll("#main-section .chip");
  let selectedDestination = null;
//////////////////////////////////////////////////////////////
  // ✅ 기존 저장된 여행지가 있으면 칩 자동 선택
const savedLocation = localStorage.getItem("selectedLocation");
if (savedLocation) {
  chips.forEach(chip => {
    if (chip.textContent.trim() === savedLocation) {
      chip.classList.add("active");
      selectedDestination = savedLocation;
    }
  });
}
////////////////////////////////////////////////////


  // 여행지 버튼 클릭
  chips.forEach(chip => {
    chip.addEventListener("click", () => {
      chips.forEach(c => c.classList.remove("active"));

      if (selectedDestination === chip.textContent.trim()) {
        selectedDestination = null;
      } else {
        chip.classList.add("active");
        selectedDestination = chip.textContent.trim();
      }

      if (chip.id === "custom-input-btn") {
        document.getElementById("main-section").style.display = "none";
        document.getElementById("destination-screen").style.display = "flex";
      }
    });
  });
////////////////////////////////////////////////////////////////////////////////
  // ✅ 직접 입력 완료 버튼 클릭 시 (셋에서 왔으면 셋으로 복귀)
document.querySelector(".button-complete").addEventListener("click", (e) => {
  e.preventDefault(); // a 태그 기본 이동 방지

  const inputValue = document.querySelector(".input-real").value.trim();
  if (inputValue === "") {
    alert("여행지를 입력해주세요.");
    return;
  }

  selectedDestination = inputValue;
  localStorage.setItem("selectedLocation", selectedDestination);

  const fromPage = new URLSearchParams(window.location.search).get("from");
  if (fromPage === "justgoset.html") {
    location.href = "justgoset.html";      // ✅ 설정 페이지로 복귀
  } else {
    location.href = "justgocalendar.html"; // 기존 플로우
  }
});
/////////////////////////////////////////////////////

  // ✅ 완료 버튼 클릭 (선택된 칩 기준)
  document.getElementById("submit-btn").addEventListener("click", () => {
    const urlParams = new URLSearchParams(window.location.search);
    const fromPage = urlParams.get("from");

    if (selectedDestination) {
      localStorage.setItem("selectedLocation", selectedDestination);

      if (fromPage === "justgoset.html") {
        location.href = "justgoset.html";
      } else {
        location.href = "justgocalendar.html";
      }

    } else {
      alert("여행지를 선택해주세요.");
    }
  });

  // ✅ skip 버튼
document.querySelector("#main-section .skip-link").addEventListener("click", handleSkip);
document.querySelector("#destination-screen .link-skip").addEventListener("click", handleSkip);

///////////////////////////////////////////////////////
 function handleSkip(e) {
  // a 태그 기본 이동 방지 (깜빡임 방지)
  if (e && e.preventDefault) e.preventDefault();

  const urlParams = new URLSearchParams(window.location.search);
  const fromPage = urlParams.get("from");

  if (fromPage === "justgoset.html") {
    // ✅ justgoset에서 온 경우: 값 유지
    localStorage.setItem("skipRecommendation", "true");
    location.href = "justgoset.html";
  } else {
    // ✅ 다른 경우: 기존처럼 값 삭제
    localStorage.removeItem("selectedLocation");
    localStorage.removeItem("selectedDates");
    localStorage.removeItem("selectedCompanions");
    localStorage.removeItem("hasPet");
    localStorage.removeItem("selectedStyles");
    localStorage.setItem("skipRecommendation", "true");

    location.href = "justgocalendar.html";
  }
}

//////////////////////////////////////////

</script>



</body>
</html>