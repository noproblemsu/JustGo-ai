<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>여행 스타일 선택</title>
  <style>
    body {
      margin: 0;
      font-family: 'Istok Web', sans-serif;
      background-color: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    * {
      box-sizing: border-box;
    }

    .preferences-container {
      background-color: #ffffff;
      width: 100%;
      max-width: 393px;
      padding: 50px 16px;
      display: flex;
      flex-direction: column;
    }

    .main-title {
      font-weight: 700;
      font-size: 30px;
      line-height: 1.44;
      color: #000000;
      margin: 0 0 32px;
    }

    .form-section {
      margin-bottom: 24px;
    }

    .section-title {
      font-weight: 700;
      font-size: 18px;
      line-height: 1.5;
      letter-spacing: -0.18px;
      color: #000000;
      margin: 0 0 13px;
    }

    .tags-container {
      display: flex;
      flex-wrap: wrap;
      gap: 16px 10px;
    }

    .tag-button {
      background-color: #d9d9d9;
      border-radius: 40px;
      border: none;
      padding: 9px 18px;
      font-size: 10px;
      line-height: 1.5;
      letter-spacing: -0.1px;
      color: #000000;
      cursor: pointer;
    }

    .tag-button.long-tag {
      padding: 9px 24px;
    }

    .tag-button.selected {
      background-color: #0059ff;
      color: white;
      font-weight: 700;
    }

    .slider-wrapper {
      margin-top: 12px;
      padding: 0 5px;
    }

    .slider-track {
      position: relative;
      width: 100%;
      height: 4px;
      background-color: #d9d9d9;
      border-radius: 2px;
      cursor: pointer;
    }

    .slider-handle {
      position: absolute;
      top: 50%;
      left: 0%;
      transform: translate(-50%, -50%);
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background-color: #0059ff;
      cursor: pointer;
    }

    .slider-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 14px;
      letter-spacing: -0.14px;
      color: #000000;
    }

    .actions-container {
      margin-top: auto;
      padding-top: 47px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    .submit-button {
      width: 100%;
      height: 55px;
      background-color: #0059ff;
      border-radius: 8px;
      border: none;
      font-weight: 700;
      font-size: 18px;
      color: #ffffff;
      cursor: pointer;
    }

    .skip-link {
      font-size: 12px;
      color: #000000;
      text-decoration: none;
    }
  </style>
</head>
<body>

<main class="preferences-container">
  <h1 class="main-title">어떤 스타일의 <br>여행을 원하시나요?</h1>

  <section class="form-section">
    <h2 class="section-title">누구와</h2>
    <div class="tags-container companion-tags">
      <button class="tag-button">혼자</button>
      <button class="tag-button">친구와</button>
      <button class="tag-button">연인과</button>
      <button class="tag-button">배우자와</button>
      <button class="tag-button">아이와</button>
      <button class="tag-button">부모님과</button>
      <button class="tag-button">반려견과</button>
    </div>
  </section>

  <section class="form-section">
    <h2 class="section-title">여행 스타일</h2>
    <div class="tags-container style-tags">
      <button class="tag-button">체험/액티비티</button>
      <button class="tag-button long-tag">SNS 핫플레이스</button>
      <button class="tag-button">자연 휴식</button>
      <button class="tag-button">유명 관광지</button>
      <button class="tag-button">힐링</button>
      <button class="tag-button">문화/예술/역사</button>
      <button class="tag-button">쇼핑</button>
      <button class="tag-button">식도락 여행</button>
    </div>
  </section>

  <section class="form-section">
    <h2 class="section-title">여행 강도</h2>
    <div class="slider-wrapper">
      <div class="slider-track" id="sliderTrack">
        <div class="slider-handle" id="sliderHandle"></div>
      </div>
      <div class="slider-labels">
        <span>Light</span>
        <span>Hard</span>
      </div>
    </div>
  </section>

  <div class="actions-container">
    <button class="submit-button" onclick="submitSelections()">완료</button>
    <a href="#" class="skip-link" id="skipLink">다음에 하기</a>
  </div>
</main>


<script>
  const urlParams = new URLSearchParams(window.location.search);
const fromPage = urlParams.get("from");

  // 태그 버튼 토글
  const tagButtons = document.querySelectorAll('.tag-button');
  tagButtons.forEach(button => {
    button.addEventListener('click', () => {
      button.classList.toggle('selected');
    });
  });

  // 슬라이더 기능
  const sliderTrack = document.getElementById('sliderTrack');
  const sliderHandle = document.getElementById('sliderHandle');
  let sliderValue = 0;

  sliderHandle.addEventListener('mousedown', startDrag);
  sliderTrack.addEventListener('click', jumpTo);

  function startDrag(e) {
    e.preventDefault();
    document.addEventListener('mousemove', onDrag);
    document.addEventListener('mouseup', stopDrag);
  }

  function onDrag(e) {
    const rect = sliderTrack.getBoundingClientRect();
    let x = e.clientX - rect.left;
    x = Math.max(0, Math.min(x, rect.width));
    const percent = (x / rect.width) * 100;
    sliderHandle.style.left = `${percent}%`;
    sliderValue = Math.round(percent);
  }

  function stopDrag() {
    document.removeEventListener('mousemove', onDrag);
    document.removeEventListener('mouseup', stopDrag);
  }

  function jumpTo(e) {
    const rect = sliderTrack.getBoundingClientRect();
    let x = e.clientX - rect.left;
    x = Math.max(0, Math.min(x, rect.width));
    const percent = (x / rect.width) * 100;
    sliderHandle.style.left = `${percent}%`;
    sliderValue = Math.round(percent);
  }

  // 완료 버튼 클릭 시
  
 function submitSelections() {
  const selectedCompanions = Array.from(document.querySelectorAll('.companion-tags .tag-button.selected')).map(btn => btn.textContent);
  const selectedStyles = Array.from(document.querySelectorAll('.style-tags .tag-button.selected')).map(btn => btn.textContent);

  // ✅ "반려견과"가 선택되었는지 여부
  const hasPet = selectedCompanions.includes("반려견과");
  
  // ✅ 각각 따로 저장
  localStorage.setItem('selectedCompanions', JSON.stringify(selectedCompanions));
  localStorage.setItem('selectedStyles', JSON.stringify(selectedStyles));
  localStorage.setItem('hasPet', hasPet.toString()); // "true" 또는 "false"
  localStorage.setItem('travelIntensity', sliderValue.toString());

  // ✅ 페이지 이동
  if (fromPage === "justgoset.html") {
  window.location.href = 'justgoset.html';
} else {
  window.location.href = 'justgotour.html';
}

}


  // 다음에 하기 클릭 시 저장된 스타일 관련 정보 제거 후 이동
document.getElementById('skipLink').addEventListener('click', function (e) {
  e.preventDefault();

  // 저장된 값 제거
  localStorage.removeItem('selectedCompanions');
  localStorage.removeItem('selectedStyles');
  localStorage.removeItem('hasPet');
  localStorage.removeItem('travelIntensity');

if (fromPage === "justgoset.html") {
  window.location.href = 'justgoset.html';
} else {
  window.location.href = 'justgotour.html';
}

});

</script>

</body>
</html>
